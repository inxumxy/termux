# 🎯 Loyiha Xususiyatlari va Funksiyalari

## 📋 To'liq funksiyalar ro'yxati

### 👤 Foydalanuvchi Paneli

#### 1. 🚀 /start - Botni boshlash
- ✅ Majburiy a'zolik tekshiruvi
- ✅ Foydalanuvchi ro'yxatdan o'tkazish
- ✅ Xush kelibsiz xabari
- ✅ Asosiy menyu ko'rsatish
- ✅ Admin uchun maxsus panel

#### 2. 🤖 AI Agent bot yaratish
- ✅ Gemini AI integratsiyasi
- ✅ NONOCHA BOT assistant
- ✅ Suhbat tarixi saqlash
- ✅ Kunlik 20 so'rov limiti
- ✅ PHP kod generatsiyasi
- ✅ Xato tuzatish va tahlil
- ✅ Kod optimizatsiya
- ✅ Log.txt ga xatolarni yozish
- ✅ Webhook avtomatik sozlash

**AI Agent imkoniyatlari:**
- PHP procedural kod yozish
- Telegram Bot API integratsiyasi
- Xatolarni aniqlash va tuzatish
- Kod optimizatsiya qilish
- Qo'llanma va yo'riqnomalar
- Savollarga javob berish

#### 3. 💻 Kod orqali bot yaratish
**Jarayon:**
1. Bot token so'raladi
2. Token tekshiriladi (/getMe)
3. Bot ma'lumotlari saqlanadi
4. PHP fayl yuklash so'raladi
5. Xavfsizlik tekshiruvi
6. Token kodda borligini tekshirish
7. Storage limit tekshiruvi
8. Fayl saqlash (user_id/bot_number/)
9. Log qo'shish
10. Webhook o'rnatish
11. Database ga saqlash

**Xavfsizlik tekshiruvlari:**
- ❌ vendor/autoload.php
- ❌ MySQL/Database
- ❌ Python kod
- ❌ eval(), exec(), system()
- ❌ Shell buyruqlari
- ❌ File manipulation
- ❌ Infinite loops
- ❌ Memory limit bypass

#### 4. 📁 File Manager
**Funksiyalar:**
- ✅ Bot tanlash (ro'yxat)
- ✅ Fayllar ro'yxati
- ✅ Fayl ma'lumotlari (hajm, sana)
- ✅ Faylni yuklab olish
- ✅ Faylni o'chirish
- ❌ Yangi fayl yuklash (xavfsizlik)

**Qo'llab-quvvatlanadigan fayllar:**
- PHP fayllar (.php)
- JSON fayllar (.json)
- Text fayllar (.txt)
- Log fayllar (.log)

#### 5. 🤖 Mening Botlarim
**Ma'lumotlar:**
- Bot username (@username)
- Bot raqami (#1, #2, ...)
- Webhook holati (✅/❌)
- Yaratilgan sana
- Boshqarish tugmalari

**Amallar:**
- 📊 Bot ma'lumotlarini ko'rish
- 🗑 Botni o'chirish (fayl + database)
- 🔄 Webhook qayta sozlash

#### 6. 💼 Kabinet
**Statistika:**
- 👤 Foydalanuvchi ismi (mention)
- 💎 Balans (olmos)
- 📊 Joriy tarif
- 🤖 Botlar soni (qancha/limit)
- 💾 Storage (MB/limit MB)

**Tugmalar:**
- 💎 Balans to'ldirish
- 📊 Ta'rifni yangilash

#### 7. 💎 Balans
- ✅ Joriy balans ko'rsatish
- ✅ 1 olmos = 120 UZS
- ✅ Admin bilan bog'lanish
- ✅ To'lov yo'riqnomasi

#### 8. 📊 Ta'riflar
**FREE (Bepul):**
- 🤖 1 ta bot
- 💾 1 MB storage
- 💎 0 olmos
- 🆓 Barcha asosiy funksiyalar

**PRO:**
- 🤖 4 ta bot
- 💾 4.5 MB storage
- 💎 99 olmos
- ⚡ Barcha funksiyalar
- 🎯 Priority support

**VIP:**
- 🤖 7 ta bot
- 💾 15 MB storage
- 💎 299 olmos (2.99 USD)
- 🔥 Barcha funksiyalar
- 👑 Premium support
- 🚀 Tezkor ishlov

**Ta'rif sotib olish:**
- ✅ Balansdan avtomatik yechiladi
- ✅ Darhol faollashadi
- ✅ Bildirishnoma yuboriladi

#### 9. ❓ Yordam
**Qo'llanmalar:**
- 📝 Bot yaratish (BotFather)
- 🔑 Token olish
- 💻 Kod tahrirlovchilar
  - QuickEdit (Android)
  - Code Editor (iOS)
  - Acode
- 📚 FAQ
- 📞 Admin kontakt

#### 10. 📞 Admin bilan bog'lanish
- ✅ Xabar yuborish
- ✅ Adminga avtomatik forward
- ✅ Reply funksiyasi
- ✅ Tarix saqlash
- ✅ Javob olish

---

### 👨‍💼 Admin Panel

#### 1. /admin - Admin panel kirish
- ✅ Faqat ADMIN_ID
- ✅ Maxsus admin menyu
- ✅ Barcha boshqaruv funksiyalari

#### 2. ⚙️ Ta'rif belgilash
**Har bir tarif uchun:**
- 🤖 Bot limiti (son)
- 💾 Storage limiti (MB)
- 💎 Narx (olmos)

**Sozlash:**
- ✅ FREE sozlamalari
- ✅ PRO sozlamalari
- ✅ VIP sozlamalari
- ✅ Darhol saqlash
- ✅ Barcha foydalanuvchilarga ta'sir

#### 3. 💎 Balans qo'shish
**Jarayon:**
1. User ID so'raladi
2. Olmos miqdori so'raladi
3. Database yangilanadi
4. Foydalanuvchiga bildirishnoma
5. Admin tasdiq oladi

#### 4. 📢 Majburiy kanal
**Funksiyalar:**
- ✅ Kanal qo'shish
  - Channel ID
  - Channel username (@channel)
- ✅ Kanal o'chirish
- ✅ Kanal ro'yxati
- ✅ A'zolik tekshiruvi

**Tekshiruv:**
- getChatMember API
- Status: member, administrator, creator
- Barcha kanallar tekshiriladi

#### 5. 📣 Reklama/Post yuborish
**Imkoniyatlar:**
- 📝 Text xabar
- 🖼 Rasm bilan
- 🎥 Video bilan
- 📎 Fayl bilan
- 🔗 URL tugma

**Yuborish:**
- ✅ Barcha foydalanuvchilarga
- ✅ Statistika (qancha yuborildi)
- ✅ Xato hisoboti
- ❌ Ban foydalanuvchilarga yubormaydi

#### 6. 🔧 Maintenance Mode
**Sozlamalar:**
- ⏱ Davomiylik (1-72 soat)
- 💬 Xabar matni
- ⏰ End time

**Ishlash:**
- ✅ Faqat admin kiradi
- ✅ Boshqalar xabar oladi
- ✅ Avtomatik o'chadi
- ✅ Manual o'chirish

#### 7. 📊 Statistika
**Ko'rsatkichlar:**
- 👥 Jami foydalanuvchilar
- 🤖 Yaratilgan botlar
- 🚫 Bloklangan foydalanuvchilar
- 💾 Umumiy storage (MB)
- 💎 Jami balans
- 📈 Kunlik statistika

#### 8. 🚫 Ban/Unban
**Funksiyalar:**
- ✅ User ID orqali bloklash
- ✅ Blokdan chiqarish
- ✅ Ban sababi
- ✅ Ban tarixi
- ✅ Bildirishnoma

**Ban qilingan foydalanuvchi:**
- ❌ Botga kira olmaydi
- ❌ Xabar yubora olmaydi
- ❌ Tugma bosa olmaydi
- ℹ️ "Siz bloklangansiz!" xabari

---

## 🗄 Database Strukturasi

### users - Foydalanuvchilar
```sql
- user_id (INTEGER PRIMARY KEY)
- username (TEXT)
- first_name (TEXT)
- tariff (TEXT) - free/pro/vip
- balance (INTEGER) - olmos
- is_banned (INTEGER) - 0/1
- created_at (INTEGER) - timestamp
```

### bots - Foydalanuvchi botlari
```sql
- id (INTEGER PRIMARY KEY AUTOINCREMENT)
- user_id (INTEGER)
- bot_token (TEXT)
- bot_username (TEXT)
- bot_number (INTEGER) - 1,2,3...
- webhook_set (INTEGER) - 0/1
- created_at (INTEGER)
```

### channels - Majburiy kanallar
```sql
- id (INTEGER PRIMARY KEY AUTOINCREMENT)
- channel_id (TEXT)
- channel_username (TEXT)
- added_at (INTEGER)
```

### tariffs - Ta'riflar
```sql
- name (TEXT PRIMARY KEY) - free/pro/vip
- bot_limit (INTEGER)
- storage_limit_mb (REAL)
- price_diamond (INTEGER)
```

### admin_messages - Admin xabarlari
```sql
- id (INTEGER PRIMARY KEY AUTOINCREMENT)
- user_id (INTEGER)
- message_text (TEXT)
- created_at (INTEGER)
```

### user_states - Foydalanuvchi holatlari
```sql
- user_id (INTEGER PRIMARY KEY)
- state (TEXT)
- data (TEXT)
```

### ai_conversations - AI suhbatlar
```sql
- user_id (INTEGER)
- bot_number (INTEGER)
- role (TEXT) - user/model
- content (TEXT)
- created_at (INTEGER)
```

### ai_usage - AI limitlar
```sql
- user_id (INTEGER PRIMARY KEY)
- daily_requests (INTEGER)
- last_reset (INTEGER)
```

### maintenance - Texnik ishlar
```sql
- id (INTEGER PRIMARY KEY)
- is_active (INTEGER)
- end_time (INTEGER)
- message (TEXT)
```

---

## 🔐 Xavfsizlik Xususiyatlari

### Code Scanning
**Bloklangan pattern'lar:**
1. `vendor/autoload.php` - Composer kutubxonalar
2. `mysql_*`, `mysqli_*`, `PDO` - Database
3. `exec()`, `shell_exec()`, `system()` - Shell buyruqlar
4. `eval()`, `base64_decode()` - Obfuscation
5. `python` - Python kod
6. `curl_exec` (telegram.org dan tashqari)
7. `unlink(../)`, `rmdir()` - File manipulation
8. `while(true)`, `for(;;)` - Infinite loops
9. `set_time_limit(0)` - Time limit bypass

### Storage Limits
- ✅ Tarif bo'yicha limit
- ✅ Har bir fayl tekshirish
- ✅ Umumiy hajm hisobi
- ❌ Limit oshsa rad etish

### Permissions
- ✅ Faqat o'z fayllariga kirish
- ✅ User ID papka ajratilgan
- ✅ Bot raqam papka ajratilgan
- ❌ Boshqa foydalanuvchi fayllariga kirish yo'q

### Webhook Security
- ✅ SSL majburiy
- ✅ Unique URL har bot uchun
- ✅ user_id va bot_number parameter
- ✅ Chroot o'xshash (chdir)

---

## 🚀 Performance

### Caching
- ✅ SQLite prepared statements
- ✅ Function result caching
- ✅ Database connection reuse

### Optimization
- ✅ Minimal API calls
- ✅ Batch operations
- ✅ Efficient queries
- ✅ File size checking

### Limits
- ⏱ Max execution time: 30s
- 💾 Memory limit: 128M
- 📤 Upload max: 10M
- 🔢 AI requests: 20/day

---

## 📱 User Experience

### Inline Keyboard
- ✅ Responsive design
- ✅ Clear navigation
- ✅ Back buttons
- ✅ Confirm dialogs

### Messages
- ✅ HTML formatting
- ✅ Emoji icons
- ✅ Mention support
- ✅ Multi-language ready

### Error Handling
- ✅ User-friendly errors
- ✅ Admin notifications
- ✅ Log recording
- ✅ Automatic recovery

---

## 🎨 Customization

### Tariflar
- Admin paneldan sozlanadi
- Default qiymatlar bor
- Istalgancha tarif qo'shish mumkin

### Valyuta
- Olmos (💎) ishlatiladi
- 1 olmos = 120 UZS (o'zgartiriladi)
- Admin olmos beradi

### Limitlar
- Bot soni
- Storage hajmi
- AI so'rovlar
- Fayl hajmi

---

## 🔄 Updates va Maintenance

### Database Migrations
- ✅ Automatic table creation
- ✅ Default data insertion
- ✅ Safe updates

### Backup
- 📅 Avtomatik backup (cron)
- 💾 Database backup
- 📁 Files backup
- ⏰ 30 kun saqlash

### Monitoring
- 📊 Real-time statistics
- 📝 Log files
- 🐛 Error tracking
- ⚠️ Alert notifications

---

**Jami:** 50+ funksiya, 100% to'liq ishlaydigan platform! 🎉
